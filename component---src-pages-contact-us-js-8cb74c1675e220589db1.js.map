{"version":3,"sources":["webpack:///./src/pages/contact-us.js"],"names":["config","siteMetadata","title","siteUrl","google","pageMeta","description","ContactPage","verifyCallback","Token","setState","recaptchaToken","updateToken","recaptcha","execute","componentDidMount","loadReCaptcha","recaptchaSiteKey","componentWillUnmount","nodeBadge","document","querySelector","body","removeChild","parentNode","chatra","parentElement","scripts","elem","src","indexOf","render","type","id","className","href","ref","sitekey","action","this","React","Component","subLayout","container"],"mappings":"mhCAemCA,IAAOC,aAAlCC,E,EAAAA,MAAOC,E,EAAAA,QAASC,E,EAAAA,OAKlBC,EAAW,CACfH,MAAO,aACPI,YAAa,oBAaTC,E,oJA4FJC,eAAiB,SAACC,GAChB,EAAKC,SAAS,CACZC,eAAgBF,K,EAOpBG,YAAc,WAEZ,EAAKC,UAAUC,W,8CA5FjBC,kBAAA,WACEC,wBAAcZ,EAAOa,mB,EAMvBC,qBAAA,WAQE,IAAMC,EAAYC,SAASC,cAAc,qBACrCF,GACFC,SAASE,KAAKC,YAAYJ,EAAUK,YAEtC,IAAMC,EAASL,SAASC,cAAc,WAClCI,GACFA,EAAOC,cAAcH,YAAYE,GASnC,IADA,IACA,MADgBL,SAASO,WACzB,aAA0B,CAAC,IAAlBC,EAAiB,UACsB,IAA1CA,EAAKC,IAAIC,QAAQ,sBAGmC,IAA7CF,EAAKC,IAAIC,QAAQ,yBAD1BF,EAAKJ,WAAWD,YAAYK,K,EA8DlCG,OAAA,WAAU,IAAD,OACP,OACA,oCACA,kBAAC,IAAD,KACE,4BAAQC,KAAK,uBAAb,mIAKkB7B,EALlB,8BAMmBD,EANnB,8NAeA,2nBAsBF,yBAAK+B,GAAG,UAAUC,UAAU,iBAC1B,yBAAKA,UAAU,WACb,4BAAK7B,EAASH,OACd,kBAAC,IAAD,OAEF,+BACE,qCACA,2BAAG,uBAAGiC,KAAK,oBAAR,kBAEL,kBAAC,YAAD,CACEC,IAAK,SAAAA,GAAG,OAAI,EAAKvB,UAAYuB,GAC7BC,QAASjC,EAAOa,iBAChBqB,OAAO,cACP9B,eAAgB+B,KAAK/B,oB,GAhKHgC,IAAMC,WAwKhClC,EAAYF,SAAWA,EACvBE,EAAYmC,UAhLM,CAChBC,UAAW,OAiLEpC","file":"component---src-pages-contact-us-js-8cb74c1675e220589db1.js","sourcesContent":["/**\r\n * Contact page.\r\n */\r\nimport React from \"react\"\r\nimport { Helmet } from \"react-helmet\"\r\n//import { Link as GatsbyLink } from \"gatsby\"\r\n//import ContactForm from \"../components/contact-form\"\r\nimport ContactForm from \"../components/contactForm\"\r\nimport { loadReCaptcha, ReCaptcha } from 'react-recaptcha-v3'\r\nimport config from '../../gatsby-config'\r\nimport '../styles/contact.css'\r\n\r\n/**\r\n * SiteMeta.\r\n */\r\nconst { title, siteUrl, google } = config.siteMetadata\r\n\r\n/**\r\n * Page Meta.\r\n */\r\nconst pageMeta = {\r\n  title: 'Contact us',\r\n  description: 'Contact stuff...',\r\n}\r\n\r\n/**\r\n * Sublayout.\r\n */\r\nconst subLayout = {\r\n  container: 'col'\r\n}\r\n\r\n/**\r\n * React component (JSX).\r\n */\r\nclass ContactPage extends React.Component {\r\n\r\n  /*\r\n  state = {\r\n    recaptchaToken: \"\"\r\n  }\r\n  */\r\n \r\n  /**\r\n   * Load Google reCaptcha in the page.\r\n   */\r\n  componentDidMount() {\r\n    loadReCaptcha(google.recaptchaSiteKey)\r\n  }\r\n\r\n  /**\r\n   * Unload Google reCaptcha from the page.\r\n   */\r\n  componentWillUnmount() {\r\n\r\n    //const recaptcha = this.state.recaptchaToken\r\n    //console.log(\"Recaptcha token from unmount: %s\", recaptcha)\r\n    \r\n    /**\r\n     * Remove the UI elements.\r\n     */\r\n    const nodeBadge = document.querySelector('.grecaptcha-badge')\r\n    if (nodeBadge) {\r\n      document.body.removeChild(nodeBadge.parentNode)\r\n    }\r\n    const chatra = document.querySelector('#chatra')\r\n    if (chatra) {\r\n      chatra.parentElement.removeChild(chatra)\r\n    }\r\n\r\n    /**\r\n     * Remove unneeded scripts elements before leeving page.\r\n     * \r\n     * @note  Query selector not working.\r\n     */\r\n    const scripts = document.scripts\r\n    for (let elem of scripts) {\r\n      if( elem.src.indexOf('recaptcha/api.js') !== -1) {\r\n        //thisScript = scripts[i]\r\n        elem.parentNode.removeChild(elem)\r\n      } else if( elem.src.indexOf('chatra.io/chatra.js') !== -1) {\r\n        //thisScript = scripts[i]\r\n        elem.parentNode.removeChild(elem)\r\n      }\r\n\r\n      /*\r\n      console.log(`elem: ${elem.src}`);\r\n      if (elem.matches('script[src$=\"www.recaptcha.net\"]')) {\r\n        console.log(\"The archive reference: \" + elem.src )\r\n      }\r\n      */\r\n    }\r\n    \r\n    /*\r\n    const scripts = document.scripts\r\n    const scriptSelector = `script[src=\"https://www.recaptcha.net/recaptcha/api.js?onload=onLoadCaptchaV3Callback&amp;render=${google.recaptchaSiteKey}\"]`\r\n    console.log(scriptSelector)\r\n    const nodeScript = document.querySelector(scriptSelector)\r\n    console.log(nodeScript)\r\n    if (nodeScript) {\r\n      document.body.removeChild(nodeScript.parentNode)\r\n    }\r\n    */\r\n    //var scripts = document.getElementsByTagName('script')\r\n\r\n    /*\r\n    var scripts = document.scripts\r\n    var thisScript = null\r\n    var i = scripts.length\r\n    while (i--) {\r\n      if( scripts[i].src && (scripts[i].src.indexOf('recaptcha/api.js') !== -1) ) {\r\n        thisScript = scripts[i]\r\n        thisScript.parentNode.removeChild(thisScript);\r\n        break;\r\n      }\r\n    }\r\n    */\r\n\r\n    /*\r\n    const script = document.querySelector(thisScript)\r\n    console.log(script)\r\n    if(script) {\r\n      script.remove()\r\n    }\r\n    */\r\n  }\r\n\r\n  verifyCallback = (Token) => {\r\n    this.setState({\r\n      recaptchaToken: Token\r\n    })\r\n    \r\n    // Here you will get the final recaptchaToken!!!  \r\n    //console.log(recaptchaToken, \"<= your recaptcha token\")\r\n  }\r\n\r\n  updateToken = () => {\r\n    // you will get a new token in verifyCallback\r\n    this.recaptcha.execute();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <>\r\n    <Helmet>\r\n      <script type=\"application/ld+json\">\r\n        {`\r\n            {\r\n              \"@context\": \"https://schema.org\",\r\n              \"@type\": \"Organization\",\r\n              \"url\": \"${siteUrl}\",\r\n              \"name\": \"${title}\",\r\n              \"contactPoint\": {\r\n                \"@type\": \"ContactPoint\",\r\n                \"telephone\": \"450-431-7253\",\r\n                \"contactType\": \"Customer Support\"\r\n              }\r\n            }\r\n          `}\r\n      </script>\r\n      <script>\r\n      {`\r\n      window.ChatraSetup = {\r\n          buttonSize: 70,\r\n          colors: {\r\n            buttonText: '#f9f8fa',\r\n            buttonBg: '#ea5600'\r\n          },\r\n        };\r\n        (function(d, w, c) {\r\n            w.ChatraID = 'YR8kBfXZ7t8tm7BRg';\r\n            var s = d.createElement('script');\r\n            w[c] = w[c] || function() {\r\n                (w[c].q = w[c].q || []).push(arguments);\r\n            };\r\n            s.async = true;\r\n            s.src = 'https://call.chatra.io/chatra.js';\r\n            if (d.head) d.head.appendChild(s);\r\n        })(document, window, 'Chatra');\r\n        `}\r\n        </script>\r\n    </Helmet>\r\n    <div id=\"content\" className=\"container col\">\r\n      <div className=\"content\">\r\n        <h1>{pageMeta.title}</h1>\r\n        <ContactForm />\r\n      </div>\r\n      <aside>\r\n        <h2>Phone</h2>\r\n        <p><a href=\"tel:450-431-7253\">450-431-7253</a></p>\r\n      </aside>\r\n      <ReCaptcha\r\n        ref={ref => this.recaptcha = ref}\r\n        sitekey={google.recaptchaSiteKey}\r\n        action='action_name'\r\n        verifyCallback={this.verifyCallback}\r\n      />\r\n    </div>\r\n    </>\r\n    )\r\n    }\r\n  }\r\n\r\nContactPage.pageMeta = pageMeta\r\nContactPage.subLayout = subLayout\r\n\r\nexport default ContactPage\r\n"],"sourceRoot":""}